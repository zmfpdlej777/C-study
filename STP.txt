20.12.03

1. STP (Spanning Tree Protocol)

 1)개념/목적
 단일경로 : 포트 안닫음
 다중경로 : 하나만 남기고 나머지 포트 다 닫음(Block Port)
	 =단일경로로 돌아가려고 한다.
	Why? 루핑 방지. 다중경로가 되면서 역광고(루핑의 전제)를 주 경로외 다른 경로가 하면서
	     루핑이 발생. 
	대책? 2초마다 검사하며 루핑 방지, 기존 선 외 타선들은 백업용으로 존재. 기존 서버가 문제가
	     생기면 30초 후 새로운 경로가 열림(백업용)
 2) 원리
  i.과거)브릿지: Mac-Table을 근간으로 한 전송 매체(스위치는 VLAN으로 대역대를 쪼갠다.)
  ii.전제) - Root Bridge(=반장) : 반장으로부터 가장 멀리 있는 세그먼트(대역폭)를 막도록 명령한다.(BPDU)
	*BPDU:블럭하라는 패킷
	  - Non-Root Bridge : 반장이 아닌 타 스위치들
  iii 반장선거)
      -Path Cost : 브릿지가 얼마나 가까이, 그리고 빠른 링크로 연결되있는지 알아내기 위한 값
			(*10Mbps=100,100Mbps=19,1G=4)
      -Birdge ID : path cost로 반장선출이 안될 경우의 비교방법(사실 제일 보편적). Bridge Priority값과 	  	   Mac address를 가지고 비교한다. priority는 defualt값이 있다.

 3) 구성
   i) RP : 반장이 아닌 스위치들 중에서 반장쪽에 가장 가까운 포트
   ii) DP : 반장이 송신용으로 가지고 있는 포트(*반장은 수신 포트가 없다)
   iii) BP : Block Port

 4) 특이사항
   i) 반장에서 막내 스위치쪽 DP를 막으면 ? => 백업 세그먼트가 열린다!
   ii) BP를 바꾸려면 ? => Priority값을 '수동' 조절(*위와 다름, 2,3,등바꾼다고 1등 안바꾸면 안됨)
			: 1~16등(2^12승 16개)까지 순서대로 설정할수 있으나 귀찮음.
		       Priority값을 '자동' 조절(*실제로는 꼴등을 기준으로 primary와 secondary가 정해진다)
			: 쉽지만 1등~2등밖에 정할수가 없다.